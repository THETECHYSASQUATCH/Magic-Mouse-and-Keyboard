#pragma once
#include <ntddk.h>
#include <wdf.h>
#include <winioctl.h>

// {7B8A2C90-6BA8-4E7C-9B67-42B04C2E1A30}
DEFINE_GUID(GUID_DEVINTERFACE_APPLEINPUT, 
0x7b8a2c90, 0x6ba8, 0x4e7c, 0x9b, 0x67, 0x42, 0xb0, 0x4c, 0x2e, 0x1a, 0x30);

#define APPLEINPUT_IOCTL_SET_CONFIG     CTL_CODE(FILE_DEVICE_UNKNOWN, 0x800, METHOD_BUFFERED, FILE_ANY_ACCESS)
#define APPLEINPUT_IOCTL_UPDATE_BATTERY CTL_CODE(FILE_DEVICE_UNKNOWN, 0x801, METHOD_BUFFERED, FILE_ANY_ACCESS)

typedef struct _APPLEINPUT_CONFIG {
    ULONG NaturalScroll;
    ULONG FnInversion;
    ULONG TrackingSpeed;
} APPLEINPUT_CONFIG, *PAPPLEINPUT_CONFIG;

typedef struct _APPLEINPUT_BATTERY {
    ULONG LevelPercent;
    ULONGLONG TimestampQpc;
} APPLEINPUT_BATTERY, *PAPPLEINPUT_BATTERY;